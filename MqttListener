package com.warehouse.robot;
import org.eclipse.paho.client.mqttv3.*;
import com.fasterxml.jackson.databind.JsonNode;
import com.fasterxml.jackson.databind.ObjectMapper;

public class MqttListener {

    private static final String BROKER =
    private static final String CLIENT_ID =
    private static final String TOPIC = 

    public static void main(String[] args) {

        try {
            MqttClient client = new MqttClient (BROKER, CLIENT_ID);
            MqttConnectOptions options = new MqttConnectOptions();
            options.setCleanSession(true);

            client.connect(options);
            System.out.println("Connected to broker: " + BROKER);

            client.subsribe(TOPIC, (topic, msg)) -> {
                String payload = new String(msg.getPayload());
                System.out.println("Message received: + payload);
            }

            ObjectMapper mapper = mapper.readTree(payload);
            int battery = rooth.parth("battery").asInt();
            int distance = root.path("distance").asInt();

            System.out.println("Battery: + battery + "%" | Distance: " + distance + "cm");
            } catch (Exception e) {
                System.err.println("Failed to parse JSON: " + e.getMessage())")}
            }
        }
        System.out.println("Listening on topic: " + TOPIC);

        } catch(MqttException e) {  
    e.printStackTracer();
    }